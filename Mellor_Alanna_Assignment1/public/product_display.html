<!DOCTYPE html>
<html lang="en">
<html>
<script>
    let params = (new URL(document.location)).searchParams;
</script>

<script>

    // errors from server has been input into the query string and assigned to the variable "errors_array". if errors_arrays is in the query string, get it, pull out the value, and display it in an alert box

    if (params.has(`errors_array`)) {
        var errors = params.get(`errors_array`)
        console.log(errors)
    }
    if (errors.length > 0) {
        alert(`Hi please fix this error: ${errors}`);
        };

</script>

<head>

    <script>//sends a GET request to the server for ./product_data</script>
    <script src="./product_data.js" type="text/javascript"></script>


    <meta charset="utf-8">
    <title>E-Commerce Store of Cards</title>
    <link href="products-style.css" rel="stylesheet">
</head>
<header>
    <h1>House of Hearts</h1>
</header>

<body>
    <div>
        <main>
            <form name="quantity_form" action="./invoice.html" method="POST">
                <script>
                    // for loop that generates product data
                    for (i = 0; i < products.length; i++)
                        document.write(`
                <section class="item">
                    <h2 name = "products${i}_name">${products[i].name}</td>
                    </h2> 
                    <p>$${products[i].price}</p>
                    <img src="${products[i].img}">
                    <p>Quantity Available: ${products[i].quantityAvailable}</p>
                    <p><b><label for = "quantities${i}" id = "quantities${i}_label">Quantity Desired</label></b><p>
                   <p><input type = "text" id = "quantities${i}" name = "quantities${i}" onload = "entered_quantities()"></p>
                </section>
            `);
                </script>
        </main>
    </div>
    <footer>
        </p><input type="submit" value="Click Here to Purchase!">
    </footer>
</body>
</form>
<script>
        // note** the form tags changed the layout of the whole page, play with css to fix this 
</script>

</html>